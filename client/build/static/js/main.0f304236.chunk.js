(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{188:function(e,t,a){e.exports=a(441)},193:function(e,t,a){},437:function(e,t,a){},441:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(21),o=a.n(c),i=(a(193),a(195),a(7)),u=a(8),s=a(10),l=a(9),m=a(11),d=a(443),p=a(445),f=a(442),h=a(12),b=a(165),E={SUCCESS:"ALERT_SUCCESS",ERROR:"ALERT_ERROR",CLEAR:"ALERT_CLEAR"},v={SUCCESS:"CONFIG_SUCCESS",FAILURE:"CONFIG_FAILURE"},g="$ MLN",S="%",O={LOGIN_REQUEST:"USERS_LOGIN_REQUEST",LOGIN_SUCCESS:"USERS_LOGIN_SUCCESS",LOGIN_FAILURE:"USERS_LOGIN_FAILURE",LOGOUT:"USERS_LOGOUT"},y=["request","success","failure"],C={};["login","getall","add","edit","history","getbyperiod","getforcreatorbyperiod"].forEach(function(e){y.forEach(function(t){var a="".concat(e.toUpperCase(),"_").concat(t.toUpperCase());C[a]="DEAL_"+a})});var j={GET_ALL_REQUEST:"ORDERS_GET_ALL_REQUEST",GET_ALL_SUCCESS:"ORDERS_GET_ALL_SUCCESS",GET_ALL_FAILURE:"ORDERS_GET_ALL_FAILURE",ADD_REQUEST:"ORDERS_ADD_REQUEST",ADD_SUCCESS:"ORDERS_ADD_SUCCESS",ADD_FAILURE:"ORDERS_ADD_FAILURE",EDIT_REQUEST:"ORDERS_EDIT_REQUEST",EDIT_SUCCESS:"ORDERS_EDIT_SUCCESS",EDIT_FAILURE:"ORDERS_EDIT_FAILURE",ACCEPT_REQUEST:"ORDERS_ACCEPT_REQUEST",ACCEPT_SUCCESS:"ORDERS_ACCEPT_SUCCESS",ACCEPT_FAILURE:"ORDERS_ACCEPT_FAILURE",CANCEL_REQUEST:"ORDERS_CANCEL_REQUEST",CANCEL_SUCCESS:"ORDERS_CANCEL_SUCCESS",CANCEL_FAILURE:"ORDERS_CANCEL_FAILURE",HISTORY_REQUEST:"ORDERS_HISTORY_REQUEST",HISTORY_SUCCESS:"ORDERS_HISTORY_SUCCESS",HISTORY_FAILURE:"ORDERS_HISTORY_FAILURE"},R={a:"SWIZ",b:"TICI",c:"NAMU",d:"HBSZ",e:"NYBO",f:"DUCE",g:"SWIZ",h:"SBRE"},_={SHOW:"MODAL_SHOW",HIDE:"MODAL_HIDE",SET_DATA:"MODAL_SET_DATA"},D="addOrder",T="editOrder",A={rate:function(e){return Number(e).toFixed(3)},number:function(e){return Number(e).toLocaleString()},date:function(e){return e.toLocaleDateString()},time:function(e){return e.toLocaleTimeString()},org:function(e){return R[e]||"###"},datetime:function(e){return e.toLocaleString()}},I=a(46),U=Object(I.a)(),N=a(39),k=a(167),L=a(168),w="user",F="token";function x(e){localStorage.setItem(w,JSON.stringify(e)),localStorage.setItem(F,e.token)}function P(){var e=localStorage.getItem(w);return e?JSON.parse(e):null}function H(){localStorage.removeItem(w),localStorage.removeItem(F)}var G=P(),B=G?{loggedIn:!0,user:G}:{};G||U.push("./login");var Q=a(5);var Y=a(23),M=a(69);var W,J=Object(N.c)({authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O.LOGIN_REQUEST:return{loggingIn:!0,user:t.user};case O.LOGIN_SUCCESS:return{loggedIn:!0,user:t.user};case O.LOGIN_FAILURE:case O.LOGOUT:return{};default:return e}},alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E.SUCCESS:return{type:"alert-success",message:t.message};case E.ERROR:return{type:"alert-danger",message:t.message};case E.CLEAR:return{};default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,a=t.type;if(t.shadowMode)return!1;var n=/(.*)_(REQUEST)/.exec(a),r=/(.*)_(SUCCESS|FAILURE)/.exec(a);return n||r?!!n||!r:e},deals:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C.GETALL_REQUEST:return Object(Q.a)({},e,{loading:!0,adding:void 0});case C.GETALL_SUCCESS:var a=new Date;a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0);var n=t.deals&&t.deals.result&&t.deals.result.filter(function(e){return 1e3*e.value.timestamp>a.getTime()});return Object(Q.a)({},e,{items:n,loading:!1});case C.GETALL_FAILURE:return Object(Q.a)({},e,{error:t.error,loading:!1});case C.ADD_REQUEST:return Object(Q.a)({},e,{adding:!0});case C.ADD_SUCCESS:return Object(Q.a)({},e,{adding:!1});case C.ADD_FAILURE:return Object(Q.a)({},e,{error:t.error});case C.EDIT_REQUEST:return Object(Q.a)({},e,{adding:!0});case C.EDIT_SUCCESS:return Object(Q.a)({},e,{adding:!1});case C.EDIT_FAILURE:return Object(Q.a)({},e,{error:t.error});case C.HISTORY_REQUEST:return Object(Q.a)({},e,{loading:!0});case C.HISTORY_SUCCESS:return Object(Q.a)({},e,{history:{},loading:!1});case C.HISTORY_FAILURE:return Object(Q.a)({},e,{error:t.error,loading:!1});default:return e}},config:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.SUCCESS:return t.config;default:return e}},orders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j.GET_ALL_REQUEST:return Object(Q.a)({},e,{adding:void 0,loading:!0});case j.GET_ALL_SUCCESS:return Object(Q.a)({},e,{items:t.orders.result,loading:!1});case j.GET_ALL_FAILURE:return Object(Q.a)({},e,{error:t.error,loading:!1});case j.ADD_REQUEST:return Object(Q.a)({},e,{adding:!0});case j.ADD_SUCCESS:return Object(Q.a)({},e,{adding:!1});case j.ADD_FAILURE:return Object(Q.a)({},e,{error:t.error});case j.EDIT_REQUEST:return Object(Q.a)({},e,{adding:!0});case j.EDIT_SUCCESS:return Object(Q.a)({},e,{adding:!1});case j.EDIT_FAILURE:return Object(Q.a)({},e,{error:t.error});case j.ACCEPT_REQUEST:return Object(Q.a)({},e,{loading:!0});case j.ACCEPT_SUCCESS:return Object(Q.a)({},e,{adding:!1,loading:!1});case j.ACCEPT_FAILURE:return Object(Q.a)({},e,{error:t.error,loading:!1});case j.REJECT_REQUEST:return Object(Q.a)({},e,{loading:!0});case j.REJECT_SUCCESS:return Object(Q.a)({},e,{adding:!1,loading:!1});case j.REJECT_FAILURE:return Object(Q.a)({},e,{error:t.error,loading:!1});case j.HISTORY_REQUEST:return Object(Q.a)({},e,{loading:!0});case j.HISTORY_SUCCESS:return Object(Q.a)({},e,{history:{},loading:!1});case j.HISTORY_FAILURE:return Object(Q.a)({},e,{error:t.error,loading:!1});default:return e}},modals:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=t.modalId,n=t.type,r=Object(M.a)(t,["modalId","type"]);switch(n){case _.SHOW:case _.HIDE:return Object(Q.a)({},e,Object(Y.a)({},a,Object(Q.a)({},e[a],r,{show:n===_.SHOW})));case _.SET_DATA:return Object(Q.a)({},e,Object(Y.a)({},a,Object(Q.a)({},e[a],r)));default:return e}}}),q=Object(L.createLogger)(),z=Object(N.d)(J,Object(N.a)(k.a,q)),K=a(13),X=a.n(K),Z=a(20),V=a(187),$={load:function(){if(te)return W;return te=!0,W=Ee("/config",{method:"GET"}).then(function(e){return ee=e})},get:function(){return ee},update:function(){return Promise.all([ne(),re()])},getPeers:function(){if(ee.peers)return ee.peers;var e=ee["network-config"][ee.org];return ee.peers=Object.keys(e).filter(function(e){return e.startsWith("peer")}),ee.peers},getChannels:ne,getChaincodes:re},ee={},te=!1;function ae(e,t,a){return ee[t]?Promise.resolve(ee[t]):e.promise?e.promise:(e.promise=e().then(function(n){return ee[t]={},n[a].forEach(function(e){ee[t][e.name]=e.name}),delete e.promise,ee[t]}),e.promise)}function ne(){return ae(se,"channels","channels")}function re(){return ae(le,"chaincodes","chaincodes")}function ce(){return $.getPeers()[0]}function oe(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];n=JSON.stringify(n);var r=$.get().org,c={peer:"".concat(r,"/").concat(ce()),fcn:a,args:n},o=new URL("".concat(window.location.origin,"/channels/").concat(e,"/chaincodes/").concat(t));return Object.keys(c).forEach(function(e){return o.searchParams.append(e,c[e])}),Ee("".concat(o.pathname).concat(o.search),{method:"GET"})}function ie(e,t,a,n){var r=$.get().org;n=n.map(function(e){return e+""});var c={method:"POST",body:JSON.stringify({peers:["".concat(r,"/").concat(ce())],fcn:a,args:n})};return Ee("/channels/".concat(e,"/chaincodes/").concat(t),c)}function ue(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Ee("/users",{method:"POST",body:JSON.stringify({username:e.name,orgName:e.org})},t)}function se(){return Ee("/channels?peer=".concat(ce()))}function le(){return Ee("/chaincodes?peer=".concat(ce()))}var me,de={obtainToken:function(){return fe.apply(this,arguments)}},pe=!1;function fe(){return(fe=Object(Z.a)(X.a.mark(function e(){var t;return X.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=P()){e.next=6;break}return pe=!1,H(),window.location.reload(!0),e.abrupt("return",Promise.resolve());case 6:if(!pe){e.next=8;break}return e.abrupt("return",me);case 8:return pe=!0,me=ue(t,!1).then(function(e){return pe=!1,e.token&&(t.token=e.token,x(t)),$.update().then(function(){return t})}).catch(function(e){return pe=!1,Promise.reject(e)}),e.abrupt("return",me);case 11:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var he={401:{retry:2,timeout:1e3,fnc:de.obtainToken.bind(de)},500:{retry:3,timeout:3e3,fnc:Promise.resolve.bind(Promise)}};function be(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(")","").split("message: ");return Object(V.a)(e,2)[1]}function Ee(e){return ve.apply(this,arguments)}function ve(){return(ve=Object(Z.a)(X.a.mark(function e(t){var a,n,r,c,o,i,u=arguments;return X.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>1&&void 0!==u[1]?u[1]:{},n=!(u.length>2&&void 0!==u[2])||u[2],a.headers=Oe(a.headers),e.next=5,fetch(t,a);case 5:if((r=e.sent).ok){e.next=20;break}if(!(c=he[r.status])||!n){e.next=15;break}return e.next=11,c.fnc();case 11:return e.next=13,ge(t,a,c.timeout,c.retry);case 13:e.next=20;break;case 15:return e.next=17,r.json();case 17:return o=e.sent,i=o&&o.message&&be(o.message)||r.statusText,e.abrupt("return",Promise.reject(new Error(i)));case 20:return e.next=22,r.json();case 22:return e.abrupt("return",e.sent);case 23:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var ge=function(e,t,a,n){return new Promise(function(r,c){!function e(t,a,n,r,c,o,i){return r<0?o(i):t.apply(this,a).then(c).catch(function(i){r--,setTimeout(function(){e(t,a,n,r,c,o,i)},n)})}(Ee,[e,t,!1],a,n,r,c)})};function Se(){var e=localStorage.getItem(F);return e?{Authorization:"Bearer "+e}:{}}function Oe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(Q.a)({},e,Se(),{"Content-Type":"application/json"})}var ye=5e3,Ce={success:function(e){return function(t){return setTimeout(function(){t(je())},ye),t({type:E.SUCCESS,message:e})}},error:function(e){return function(t){return setTimeout(function(){t(je())},ye),t({type:E.ERROR,message:e})}},clear:je};function je(){return{type:E.CLEAR}}var Re={login:function(e,t){return x({name:e,org:t}),de.obtainToken()},logout:function(){H()}};var _e={getAll:function(){return Ie.apply(this,arguments)},getByPeriod:function(e){return Ue.apply(this,arguments)},getForCreatorByPeriod:function(e){return Ne.apply(this,arguments)}},De={getAll:"queryDeals",getByPeriod:"queryDealsByPeriod",getForCreatorByPeriod:"queryDealsForCreatorByPeriod"},Te={reference:"reference"},Ae={common:"common"};function Ie(){return(Ie=Object(Z.a)(X.a.mark(function e(){var t,a;return X.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.getChannels();case 2:return t=e.sent,e.next=5,$.getChaincodes();case 5:return a=e.sent,e.next=8,oe(t[Ae.common],a[Te.reference],De.getAll);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Ue(){return(Ue=Object(Z.a)(X.a.mark(function e(t){var a,n;return X.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.getChannels();case 2:return a=e.sent,e.next=5,$.getChaincodes();case 5:return n=e.sent,e.next=8,oe(a[Ae.common],n[Te.reference],De.getByPeriod,t);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Ne(){return(Ne=Object(Z.a)(X.a.mark(function e(t){var a,n;return X.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.getChannels();case 2:return a=e.sent,e.next=5,$.getChaincodes();case 5:return n=e.sent,e.next=8,oe(a[Ae.common],n[Te.reference],De.getForCreatorByPeriod,t);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var ke={getAll:function(){return xe.apply(this,arguments)},add:function(e){return Pe.apply(this,arguments)},edit:function(e){return He.apply(this,arguments)},accept:function(e){return Ge.apply(this,arguments)},cancel:function(e){return Be.apply(this,arguments)}},Le={getAll:"queryBids",add:"placeBid",edit:"editBid",accept:"makeDeal",cancel:"cancelBid"},we={reference:"reference"},Fe={common:"common"};function xe(){return(xe=Object(Z.a)(X.a.mark(function e(){var t,a;return X.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.getChannels();case 2:return t=e.sent,e.next=5,$.getChaincodes();case 5:return a=e.sent,e.abrupt("return",oe(t[Fe.common],a[we.reference],Le.getAll));case 7:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Pe(){return(Pe=Object(Z.a)(X.a.mark(function e(t){var a,n;return X.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.getChannels();case 2:return a=e.sent,e.next=5,$.getChaincodes();case 5:return n=e.sent,e.abrupt("return",ie(a[Fe.common],n[we.reference],Le.add,[t.type+"",t.amount,t.rate]));case 7:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function He(){return(He=Object(Z.a)(X.a.mark(function e(t){var a,n;return X.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.getChannels();case 2:return a=e.sent,e.next=5,$.getChaincodes();case 5:return n=e.sent,e.abrupt("return",ie(a[Fe.common],n[we.reference],Le.edit,[t.id,0,t.amount,t.rate]));case 7:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Ge(){return(Ge=Object(Z.a)(X.a.mark(function e(t){var a,n;return X.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.getChannels();case 2:return a=e.sent,e.next=5,$.getChaincodes();case 5:return n=e.sent,e.abrupt("return",ie(a[Fe.common],n[we.reference],Le.accept,[t.key.id]));case 7:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Be(){return(Be=Object(Z.a)(X.a.mark(function e(t){var a,n;return X.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.getChannels();case 2:return a=e.sent,e.next=5,$.getChaincodes();case 5:return n=e.sent,e.abrupt("return",ie(a[Fe.common],n[we.reference],Le.cancel,[t.key.id]));case 7:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Qe={get:function(){return function(e){$.load().then(function(t){e(function(e){return{type:v.SUCCESS,config:e}}(t))},function(t){e(function(e){return{type:v.FAILURE,error:e}}(t.toString()))})}}};var Ye={register:function(e){return{type:_.HIDE,modalId:e}},show:function(e,t){return{type:_.SHOW,modalId:e,object:t}},hide:function(e){return{type:_.HIDE,modalId:e}},setData:function(e,t){return{type:_.SET_DATA,modalId:e,data:t}}};var Me={login:function(e,t){return function(a){var n;a((n={username:e},{type:O.LOGIN_REQUEST,user:n})),Re.login(e,t).then(function(e){a(function(e){return{type:O.LOGIN_SUCCESS,user:e}}(e)),U.push("./")},function(e){a(function(e){return{type:O.LOGIN_FAILURE,error:e}}(e.toString())),a(Ce.error(e.toString()))})}},logout:function(){return function(e){Re.logout(),e({type:O.LOGOUT})}}};var We={add:function(e){return function(t){t({type:C.ADD_REQUEST}),_e.add(e).then(function(e){t({type:C.ADD_SUCCESS}),t(Ce.success("Product was added"))},function(e){t(function(e){return{type:C.ADD_FAILURE,error:e}}(e.toString())),t(Ce.error(e.toString()))})}},edit:function(e){return function(t){t({type:C.EDIT_REQUEST}),_e.edit(e).then(function(e){t({type:C.EDIT_SUCCESS}),t(Ce.success("Product was updated"))},function(e){t(function(e){return{type:C.EDIT_FAILURE,error:e}}(e.toString())),t(Ce.error(e.toString()))})}},getAll:function(e){return function(t){t(function(e){return{type:C.GETALL_REQUEST,shadowMode:e}}(e)),_e.getAll().then(function(e){var a;t((a=e,{type:C.GETALL_SUCCESS,deals:a}))},function(e){return t(function(e){return{type:C.GETALL_FAILURE,error:e}}(e.toString()))})}},getByPeriod:function(e){return function(t){t(function(e){return{type:C.GETBYPERIOD_REQUEST,period:e}}(e)),_e.getByPeriod(e).then(function(e){var a;t((a=e,{type:C.GETBYPERIOD_SUCCESS,deals:a}))},function(e){return t(function(e){return{type:C.GETBYPERIOD_FAILURE,error:e}}(e.toString()))})}},getForCreatorByPeriod:function(e){return function(t){t(function(e){return{type:C.GETFORCREATORBYPERIOD_REQUEST,period:e}}(e)),_e.getForCreatorByPeriod(e).then(function(e){var a;t((a=e,{type:C.GETFORCREATORBYPERIOD_SUCCESS,deals:a}))},function(e){return t(function(e){return{type:C.GETFORCREATORBYPERIOD_FAILURE,error:e}}(e.toString()))})}},history:function(e){return function(t){t({type:C.HISTORY_REQUEST}),_e.history(e).then(function(a){t(function(e,t){return{type:C.HISTORY_SUCCESS,product:e,history:t}}(e,a))},function(e){return t(function(e){return{type:C.HISTORY_FAILURE,error:e}}(e.toString()))})}}};var Je={getAll:function(e){return function(t){t(function(e){return{type:j.GET_ALL_REQUEST,shadowMode:e}}(e)),ke.getAll().then(function(e){var a;t((a=e,{type:j.GET_ALL_SUCCESS,orders:a}))},function(e){t(function(e){return{type:j.GET_ALL_FAILURE,error:e}}(e.toString())),t(Ce.error(e.toString()))})}},add:function(e,t){return function(a){a({type:j.ADD_REQUEST}),ke.add(e,t).then(function(e){a({type:j.ADD_SUCCESS}),a(Ce.success("Order was added"))},function(e){a(function(e){return{type:j.ADD_FAILURE,error:e}}(e.toString())),a(Ce.error(e.toString()))})}},edit:function(e){return function(t){t({type:j.EDIT_REQUEST}),ke.edit(e).then(function(e){t({type:j.EDIT_SUCCESS}),t(Ce.success("Order was updated"))},function(e){t(function(e){return{type:j.EDIT_FAILURE,error:e}}(e.toString())),t(Ce.error(e.toString()))})}},accept:function(e){return function(t){t({type:j.ACCEPT_REQUEST}),ke.accept(e).then(function(e){t({type:j.ACCEPT_SUCCESS}),t(Ce.success("Order was accepted"))},function(e){t(function(e){return{type:j.ACCEPT_FAILURE,error:e}}(e.toString())),t(Ce.error(e.toString()))})}},cancel:function(e){return function(t){t({type:j.CANCEL_REQUEST}),ke.cancel(e).then(function(e){t({type:j.CANCEL_SUCCESS}),t(Ce.success("Order was cancelled"))},function(e){t(function(e){return{type:j.CANCEL_FAILURE,error:e}}(e.toString())),t(Ce.error(e.toString()))})}},history:function(e){return function(t){t({type:j.HISTORY_REQUEST}),ke.history(e).then(function(a){t(function(e,t){return{type:j.HISTORY_SUCCESS,req:e,history:t}}(e,a))},function(e){return t(function(e){return{type:j.HISTORY_FAILURE,error:e}}(e.toString()))})}}};var qe=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=(new Date).getFullYear();return r.a.createElement("div",{className:"text-center"},r.a.createElement("p",null,r.a.createElement("a",{href:"http://altoros.com",target:"_blank",rel:"noopener noreferrer"},"Altoros")," \xa9 ",e))}}]),t}(r.a.Component),ze=a(444),Ke=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.user;return r.a.createElement("nav",{className:"navbar navbar-light navbar-expand"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement("img",{src:"./AltorosLogo_mini1.png",alt:"logo"})),e&&r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"ml-5"},"Hi, ",r.a.createElement("b",null,e.name)," from ",r.a.createElement("i",null,A.org(e.org))),r.a.createElement("ul",{className:"nav navbar-nav pull-xs-right"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(ze.a,{exact:!0,to:"/",className:"nav-link"},"Dashboard")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(ze.a,{to:"/deals",className:"nav-link"},"Deals")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(ze.a,{to:"/summary",className:"nav-link"},"Summary")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(ze.a,{to:"login",className:"nav-link"},"Logout")))))}}]),t}(r.a.Component);var Xe=Object(h.b)(function(e){return{user:e.authentication.user}})(Ke),Ze=a(6),Ve=a(170),$e=a.n(Ve),et=a(177),tt=a.n(et),at=a(178),nt=[{value:"1.000",label:"1.000"},{value:"0.875",label:"0.875"},{value:"0.750",label:"0.750"},{value:"0.625",label:"0.625"},{value:"0.500",label:"0.500"},{value:"0.375",label:"0.375"},{value:"0.250",label:"0.250"},{value:"0.125",label:"0.125"}],rt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(l.a)(t).call(this,e))).state={bid:{amount:void 0,rate:void 0,type:1,created:!1},submitted:!1},a._fill(),a.handleChange=a.handleChange.bind(Object(Ze.a)(Object(Ze.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(Ze.a)(Object(Ze.a)(a))),a.changeType=a.changeType.bind(Object(Ze.a)(Object(Ze.a)(a))),a.changeRate=a.changeRate.bind(Object(Ze.a)(Object(Ze.a)(a))),a.props.setSubmitFn&&a.props.setSubmitFn(a.handleSubmit),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.amountInput.focus()}},{key:"_fill",value:function(){this.props.initData&&this.props.initData.key&&(this.state.bid.id=this.props.initData.key.id,this.state.bid.amount=this.props.initData.value.amount,this.state.bid.rate=this.props.initData.value.rate,this.state.bid.created=!0)}},{key:"changeType",value:function(e){this.setState({bid:Object(Q.a)({},this.state.bid,{type:!0===e?0:1})})}},{key:"changeRate",value:function(e){this.setState({bid:Object(Q.a)({},this.state.bid,{rate:e&&e.value||""})})}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value,r=this.state.bid;this.setState({bid:Object(Q.a)({},r,Object(Y.a)({},a,n)),submitted:!1})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.setState({submitted:!0});var t=this.state.bid;t.amount&&t.rate&&this.props.dispatch(Je[t.id?"edit":"add"](t))}},{key:"render",value:function(){var e=this,t=this.state,a=t.bid,n=t.submitted;return r.a.createElement("form",{name:"form",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"amount"},"Amount"),r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},g)),r.a.createElement("input",{type:"text",className:"form-control"+(n&&!a.amount?" is-invalid":""),name:"amount",value:a.amount,ref:function(t){e.amountInput=t},onChange:this.handleChange}),n&&!a.amount&&r.a.createElement("div",{className:"text-danger invalid-feedback"},"Amount is required"))),r.a.createElement(tt.a,{name:"rate",isClearable:!0,onChange:this.changeRate,placeholder:"Select or type any value...",options:nt,value:a.rate?{value:a.rate,label:a.rate}:void 0,components:{Control:function(e){return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"rate"},"Rate"),r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},S)),r.a.createElement(at.a.Control,Object.assign({className:"form-control"+(n&&!a.rate?" is-invalid":"")},e)),n&&!a.rate&&r.a.createElement("div",{className:"text-danger invalid-feedback"},"Rate is required")))}}}),!a.id&&r.a.createElement("div",null,r.a.createElement($e.a,{name:"type",onChange:this.changeType,checkedChildren:"Lend",unCheckedChildren:"Borrow"})))}}]),t}(r.a.Component);var ct=Object(h.b)(function(e){return{bid:e.bid}})(rt),ot=a(27),it=[.125,.25,.375,.5,.625,.75,.875,1],ut=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.deals,a=e.formatXAxis,n=e.lineType;if(!t||!t.items)return null;var c=t.items.map(function(e){return e.value.ts=a?a(new Date(1e3*e.value.timestamp)):A.time(new Date(1e3*e.value.timestamp)),e}).sort(function(e,t){return e.value.timestamp>t.value.timestamp?1:-1});return!!c.length&&r.a.createElement(ot.f,{width:"100%",height:300},r.a.createElement(ot.c,{data:c,margin:{top:20,right:20,bottom:20,left:20}},r.a.createElement(ot.b,{stroke:"#f5f5f5"}),r.a.createElement(ot.h,{dataKey:"value.ts",name:"Time"}),r.a.createElement(ot.i,{yAxisId:"left",tickFormatter:A.rate,unit:S,interval:0,ticks:it}),r.a.createElement(ot.i,{yAxisId:"right",tickFormatter:A.number,orientation:"right",unit:g}),r.a.createElement(ot.g,null),r.a.createElement(ot.d,null),r.a.createElement(ot.a,{yAxisId:"right",dataKey:"value.amount",name:"Amount",barSize:20,fill:"#413ea0",unit:g}),r.a.createElement(ot.e,{yAxisId:"left",dataKey:"value.rate",name:"Rate",type:n||"liner",stroke:"#ff7300",unit:S})))}}]),t}(r.a.Component);var st=Object(h.b)(function(e){var t=e.deals;return{user:e.authentication.user,deals:t}})(ut),lt=a(29),mt=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(s.a)(this,Object(l.a)(t).call(this))).refreshData=e.refreshData.bind(Object(Ze.a)(Object(Ze.a)(e))),e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.refreshData()}},{key:"refreshData",value:function(){this.props.dispatch(We.getAll())}},{key:"render",value:function(){var e=this.props,t=e.deals,a=e.columns;if(!t||!t.items)return null;var n=[{Header:"Lender",id:"value.lender",accessor:function(e){return A.org(e.value.lender)}},{Header:"Borrower",id:"value.borrower",accessor:function(e){return A.org(e.value.borrower)}},{Header:"Amount, "+g,id:"value.amount",accessor:function(e){return A.number(e.value.amount)}},{Header:"Rate, "+S,id:"value.rate",accessor:function(e){return A.rate(e.value.rate)}},{Header:"Date",id:"value.timestamp",accessor:function(e){return A.time(new Date(1e3*e.value.timestamp))}}];return r.a.createElement(lt.a,{columns:a||n,data:t.items||[],className:"-striped -highlight",defaultPageSize:10,minWidth:60,filterable:!0,defaultSorted:[{id:"value.timestamp",desc:!0}]})}}]),t}(r.a.Component);var dt=Object(h.b)(function(e){return{deals:e.deals}})(mt),pt=(r.a.Component,a(183)),ft=a.n(pt),ht={content:{width:"100%",height:"100%",top:"0",left:"0",cursor:"default","background-color":"rgba(255, 255, 255, 0.1)"},overlay:{"z-index":"20"}},bt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(l.a)(t).call(this,e))).handleCloseModal=a.handleCloseModal.bind(Object(Ze.a)(Object(Ze.a)(a))),a.setSubmitFn=a.setSubmitFn.bind(Object(Ze.a)(Object(Ze.a)(a))),a.handleSubmit=function(){},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.modalId;(0,e.dispatch)(Ye.register(t))}},{key:"setSubmitFn",value:function(e){this.handleSubmit=e}},{key:"handleCloseModal",value:function(){var e=this.props,t=e.modalId;(0,e.dispatch)(Ye.hide(t))}},{key:"render",value:function(){var e=this,t=this.props,a=t.modalId,n=t.modals,c=t.children,o=t.footer,i=void 0===o||o,u=t.submitText,s=void 0===u?"Save":u,l=n[a];return l&&l.show?(l.modalId=a,r.a.createElement(ft.a,{isOpen:l.show,style:ht},r.a.createElement("div",{className:"modal",tabIndex:"-1",role:"dialog",style:{display:"block"}},r.a.createElement("div",{className:(this.props.large?"modal-lg":"")+" modal-dialog",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title"},this.props.title),r.a.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:this.handleCloseModal},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("div",{className:"col"},r.a.Children.map(c,function(t){return r.a.cloneElement(t,Object(Q.a)({setSubmitFn:e.setSubmitFn,data:l.data,initData:l.object,modal:l},e.props))}))),i&&r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(t){e.handleSubmit(t)}},s),r.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.handleCloseModal},"Close"))))))):null}}],[{key:"open",value:function(e,t){this.props.dispatch(Ye.show(e,t))}}]),t}(r.a.Component);var Et=Object(h.b)(function(e){return{modals:e.modals}})(bt),vt=(a(437),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(l.a)(t).call(this,e))).cancel=a.cancel.bind(Object(Ze.a)(Object(Ze.a)(a))),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.alert;return r.a.createElement("div",{className:"notification "+(e.message?"fadein":"fadeout invisible")},e.message&&r.a.createElement("div",{className:"d-flex justify-content-between align-items-between  alert ".concat(e.type||"")},r.a.createElement("span",null,e.message),r.a.createElement("span",{"aria-hidden":"true",onClick:this.cancel,className:"close-btn"},"\xd7")))}},{key:"cancel",value:function(){this.props.dispatch(Ce.clear())}}]),t}(r.a.Component));var gt=Object(h.b)(function(e){return{alert:e.alert}})(vt),St=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(s.a)(this,Object(l.a)(t).call(this))).refreshData=e.refreshData.bind(Object(Ze.a)(Object(Ze.a)(e))),e.makeDeal=e.makeDeal.bind(Object(Ze.a)(Object(Ze.a)(e))),e.cancelBid=e.cancelBid.bind(Object(Ze.a)(Object(Ze.a)(e))),e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.refreshData()}},{key:"refreshData",value:function(){this.props.dispatch(Je.getAll())}},{key:"render",value:function(){var e=this,t=this.props,a=t.orders,n=t.user;if(!a||!a.items)return null;a.items=a.items.filter(function(e){return 0===e.value.status});var c=[{Header:"Lender",id:"lender",accessor:function(e){return 0===e.value.type?A.org(e.value.creator):""}},{Header:"Amount Lend, "+g,id:"amount.lend",className:"text-danger",accessor:function(e){return 0===e.value.type?A.number(e.value.amount):""}},{Header:"Rate, "+S,id:"value.rate",accessor:function(e){return A.rate(e.value.rate)},sortMethod:function(e,t){return e&&t&&parseFloat(e)>parseFloat(t)?1:-1}},{Header:"Amount Borrow, "+g,id:"amount.borrow",className:"text-success",accessor:function(e){return 1===e.value.type?A.number(e.value.amount):""}},{Header:"Borrower",id:"borrower",accessor:function(e){return 1===e.value.type?A.org(e.value.creator):""}},{id:"actions",Header:"Actions",accessor:"key.id",filterable:!1,Cell:function(t){var a=t.original;return r.a.createElement("div",null,0===a.value.status&&a.value.creator!==n.org&&r.a.createElement("button",{className:"btn btn-sm btn-success",title:"Make deal",onClick:function(){e.makeDeal(t.original)}},r.a.createElement("i",{className:"far fa-fw fa-handshake"})),0===a.value.status&&a.value.creator===n.org&&r.a.createElement("button",{className:"btn btn-sm btn-primary",title:"Edit",onClick:Et.open.bind(e,T,a)},r.a.createElement("i",{className:"fas fa-fw fa-pen"})),0===a.value.status&&a.value.creator===n.org&&r.a.createElement("button",{className:"btn btn-sm btn-danger",title:"Cancel",onClick:function(){e.cancelBid(t.original)}},r.a.createElement("i",{className:"fas fa-fw fa-times"})))}}];return r.a.createElement(lt.a,{columns:c,data:a.items||[],className:"-striped -highlight",defaultPageSize:10,minWidth:60,filterable:!0,getTrProps:function(e,t){return{style:{"font-weight":t&&t.original.value.creator!==n.org?"normal":"bold"}}},defaultSorted:[{id:"value.rate",desc:!0}]})}},{key:"makeDeal",value:function(e){this.props.dispatch(Je.accept(e))}},{key:"cancelBid",value:function(e){this.props.dispatch(Je.cancel(e))}},{key:"editBid",value:function(e){this.props.dispatch(Je.edit(e))}}]),t}(r.a.Component);var Ot=Object(h.b)(function(e){return{orders:e.orders,user:e.authentication.user}})(St),yt=a(14),Ct=a.n(yt),jt=a(185),Rt=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,a=e.label,n=e.checked,c=e.onChange;return r.a.createElement("div",{className:"form-check"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",checked:n,id:t,onChange:c}),r.a.createElement("label",{className:"form-check-label",htmlFor:t},a))}}]),t}(r.a.Component),_t=(a(439),{DatePicker:jt.a,CheckBox:Rt}),Dt=function(e){function t(e){var a;Object(i.a)(this,t);var n=(a=Object(s.a)(this,Object(l.a)(t).call(this,e))).props,r=n.propertyFilterContainer,c=n.handleSubmit,o=[{type:"DatePicker",label:"From",state:{nameProp:"selected",name:"fromDate",value:Ct()()},properties:{isClearable:"true"}},{type:"DatePicker",label:"To",state:{nameProp:"selected",name:"toDate",value:Ct()()},properties:{isClearable:"true"}},{type:"CheckBox",label:"",state:{nameProp:"checked",name:"myDeals",value:!1},properties:{label:"Only my Deals"}}];a.instrumentsNames=r||o;var u={};return a.instruments=a.instrumentsNames.map(function(e){if("undefined"!==typeof _t[e.type])return u[e.state.name]=e.state.value,_t[e.type];throw new Error("There is no such Component ".concat(e.type))}),a.state=u,a.handleSubmit=c.bind(Object(Ze.a)(Object(Ze.a)(a))),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e,t){t=t&&"undefined"!==typeof t&&"undefined"!==typeof t.target&&"checkbox"===t.target.type?t.target.checked:t,this.setState(Object(Y.a)({},e,t))}},{key:"prepareSubmit",value:function(e){var t=this,a={};this.instrumentsNames.map(function(e){return a[e.state.name]=Ct.a.isMoment(t.state[e.state.name])?t.state[e.state.name].format("X"):t.state[e.state.name]}),this.handleSubmit(e,a)}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{onSubmit:this.prepareSubmit.bind(this)},this.instruments.map(function(t,a){var n=e.instrumentsNames[a].properties;return n[e.instrumentsNames[a].state.nameProp]=e.state[e.instrumentsNames[a].state.name],r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"input"+a,className:"col-sm-2 col-form-label"},e.instrumentsNames[a].label),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement(t,Object.assign({id:"input"+a,onChange:e.handleChange.bind(e,e.instrumentsNames[a].state.name)},n))))}),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Apply"))))}}]),t}(r.a.Component);var Tt=Object(h.b)(function(e){return{deals:e.deals}})(Dt),At=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.route,t=this.props.component;return r.a.createElement("div",{className:"jumbotron"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement(gt,null),r.a.createElement(t,{route:e})))}}]),t}(r.a.Component);var It=Object(h.b)(function(e){return{alert:e.alert}})(At),Ut=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.timerId=setInterval(this.refreshData.bind(this,!0),5e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerId)}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.orders,n=t.dispatch;!1===a.adding&&(this.refreshData(),n(Ye.hide(D)),n(Ye.hide(T)))}},{key:"refreshData",value:function(e){this.props.dispatch(We.getAll(e)),this.props.dispatch(Je.getAll(e))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"row justify-content-between"},r.a.createElement("button",{className:"btn btn-primary mb-2",onClick:Et.open.bind(this,D)},"Place Order"),r.a.createElement(ze.a,{to:"/deals",className:"btn btn-primary mb-2"},"Deals Details")),r.a.createElement(Et,{modalId:D,title:"Place Order"},r.a.createElement(ct,null)),r.a.createElement(Et,{modalId:T,title:"Edit Order"},r.a.createElement(ct,null)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement(Ot,null)),r.a.createElement("div",{className:"col-6"},r.a.createElement(dt,null))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement(st,{lineType:"liner"}))))}}]),t}(r.a.Component);var Nt=Object(h.b)(function(e){var t=e.orders,a=e.deals,n=e.authentication,r=e.modals;return{orders:t,user:n.user,deals:a,modals:r}})(Ut),kt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(l.a)(t).call(this,e))).props.dispatch(Me.logout()),a.state={username:"",orgName:"",submitted:!1},a.handleChange=a.handleChange.bind(Object(Ze.a)(Object(Ze.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(Ze.a)(Object(Ze.a)(a))),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e){var t,a=e.target,n=a.name,r=a.value;this.setState((t={},Object(Y.a)(t,n,r),Object(Y.a)(t,"submitted",!1),t))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({submitted:!0,orgName:$.get().org},function(){var e=t.state,a=e.username,n=e.orgName,r=t.props.dispatch;a&&r(Me.login(a,n))})}},{key:"render",value:function(){var e=this.state,t=e.username,a=e.submitted;return r.a.createElement("div",{className:"col-md-6 offset-md-3"},r.a.createElement("h2",null,"Login"),r.a.createElement("form",{name:"form",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{type:"text",className:"form-control "+(a&&!t&&"is-invalid"),name:"username",value:t,onChange:this.handleChange}),a&&!t&&r.a.createElement("div",{className:"text-danger"},"Username is required")),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary"},"Login"))))}}]),t}(r.a.Component);var Lt=Object(h.b)(function(){})(kt),wt=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(s.a)(this,Object(l.a)(t).call(this))).refreshData=e.refreshData.bind(Object(Ze.a)(Object(Ze.a)(e))),e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.refreshData()}},{key:"componentDidUpdate",value:function(e){!1===this.props.deals.adding&&this.refreshData()}},{key:"refreshData",value:function(){this.props.dispatch(We.getAll())}},{key:"render",value:function(){var e=this.props,t=e.deals,a=e.user;if(!t||!t.items)return null;var n=t.items.filter(function(e){return e.value.borrower===a.org||e.value.lender===a.org}),c=n.reduce(function(e,t){var n=t.value.amount;return e+(t.value.lender===a.org?-n:n)},0),o=n.reduce(function(e,t){var n=t.value.amount/365*t.value.rate;return e+(t.value.lender===a.org?n:-n)},0),i=[{Header:"Cash out, "+g,id:"cashOut",className:"text-danger",accessor:function(e){return e.value.lender===a.org?A.number(e.value.amount):""},Footer:A.number(n.reduce(function(e,t){return e+(t.value.lender===a.org?t.value.amount:0)},0))},{Header:"Cash in, "+g,id:"cashIn",className:"text-success",accessor:function(e){return e.value.borrower===a.org?A.number(e.value.amount):""},Footer:A.number(n.reduce(function(e,t){return e+(t.value.borrower===a.org?t.value.amount:0)},0))},{Header:"Counterparty",id:"counterParty",accessor:function(e){return A.org(e.value.borrower===a.org?e.value.lender:e.value.borrower)}},{Header:g,id:"total",accessor:function(e){var t=e.value.borrower===a.org;return"".concat(t?"(":"").concat(A.number(e.value.amount)).concat(t?")":"")},Footer:A.number(c)}],u=[{Header:"Receivable, "+g,id:"cashOut",accessor:function(e){return e.value.lender===a.org?A.number(e.value.amount/365*e.value.rate):""},Footer:A.number(n.reduce(function(e,t){return e+(t.value.lender===a.org?t.value.amount/365*t.value.rate:0)},0))},{Header:"Payable, "+g,id:"cashIn",accessor:function(e){return e.value.borrower===a.org?A.number(e.value.amount/365*e.value.rate):""},Footer:A.number(n.reduce(function(e,t){return e+(t.value.borrower===a.org?t.value.amount/365*t.value.rate:0)},0))},{Header:"Counterparty",id:"counterParty",accessor:function(e){return A.org(e.value.borrower===a.org?e.value.lender:e.value.borrower)}},{Header:"Value Date",id:"value.timestamp",accessor:function(e){return A.date(new Date(1e3*(e.value.timestamp+86400)))}}];return r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col col-form-label"},r.a.createElement("button",{className:"btn",onClick:this.refreshData},"Refresh ",r.a.createElement("i",{className:"fas fa-sync"})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("h3",null,"Aftermarket clearing"),!!n.length&&r.a.createElement(lt.a,{columns:i,data:n,className:"-striped -highlight",defaultPageSize:t.items.length+1,filterable:!1,showPagination:!1,defaultSorted:[{id:"cashOut",desc:!0}]}),r.a.createElement("h5",{className:"mt-2"},"Closing balance:",r.a.createElement("span",{className:c<0?"text-danger":"text-success"}," ".concat(A.number(c)," ").concat(g)))),r.a.createElement("div",{className:"col"},r.a.createElement("h3",null,"Interest netting"),!!n.length&&r.a.createElement(lt.a,{columns:u,data:n,className:"-striped -highlight",defaultPageSize:t.items.length+1,filterable:!1,showPagination:!1,defaultSorted:[{id:"cashOut",desc:!0}]}),r.a.createElement("h5",{className:"mt-2"},"Netted:",r.a.createElement("span",{className:o<0?"text-danger":"text-success"}," ".concat(A.number(o)," ").concat(g))))))}}]),t}(r.a.Component);var Ft=Object(h.b)(function(e){e.bids;var t=e.deals,a=e.authentication,n=e.modals;return{user:a.user,deals:t,modals:n}})(wt),xt="fromDate",Pt="toDate",Ht="myDeals",Gt=[{Header:"Lender",id:"value.lender",accessor:function(e){return A.org(e.value.lender)}},{Header:"Borrower",id:"value.borrower",accessor:function(e){return A.org(e.value.borrower)}},{Header:"Amount, "+g,id:"value.amount",accessor:function(e){return A.number(e.value.amount)}},{Header:"Rate, "+S,id:"value.rate",accessor:function(e){return A.rate(e.value.rate)}},{Header:"Date & Time",id:"value.timestamp",accessor:function(e){return A.datetime(new Date(1e3*e.value.timestamp))}}],Bt=[{type:"DatePicker",label:"From",state:{nameProp:"selected",name:xt,value:Ct()()},properties:{isClearable:"true"}},{type:"DatePicker",label:"To",state:{nameProp:"selected",name:Pt,value:Ct()()},properties:{isClearable:"true"}},{type:"CheckBox",label:"",state:{nameProp:"checked",name:Ht,value:!1},properties:{label:"Only my Deals"}}],Qt=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.timerId=setInterval(this.refreshData.bind(this,!0),5e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerId)}},{key:"refreshData",value:function(e){this.props.dispatch(We.getAll(e))}},{key:"handleSubmit",value:function(e,t){e.preventDefault(),Object.keys(t).map(function(e){t[e]=null===t[e]?"0":t[e]}),t[Ht]?this.props.dispatch(We.getForCreatorByPeriod([t[xt],t[Pt]])):this.props.dispatch(We.getByPeriod([t[xt],t[Pt]]))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement(Tt,{propertyFilterContainer:Bt,handleSubmit:this.handleSubmit.bind(this)}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement(dt,{columns:Gt}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement(st,{formatXAxis:A.datetime,lineType:"liner"}))))}}]),t}(r.a.Component);var Yt=[{component:Nt,path:"/"},{component:Lt,path:"/login"},{component:Object(h.b)(function(e){var t=e.deals;return{user:e.authentication.user,deals:t}})(Qt),path:"/deals"}],Mt=[{component:Ft,path:"/summary"}],Wt=function(e){function t(e){var a;Object(i.a)(this,t);var n=(a=Object(s.a)(this,Object(l.a)(t).call(this,e))).props.dispatch;return U.listen(function(e,t){n(Ce.clear())}),n(Qe.get()),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.config,a=e.loading;return t?r.a.createElement(d.a,null,r.a.createElement(p.a,null,Yt.concat(Mt).map(function(e,n){var c=e.component,o=e.path;return r.a.createElement(f.a,{exact:!0,path:o,key:n,render:function(e){return r.a.createElement("div",null,r.a.createElement(Xe,{route:e}),r.a.createElement("div",{className:"overlay d-flex justify-content-center align-items-center "+(a?"visible":"invisible")},r.a.createElement(b.ScaleLoader,{loading:!!a})),r.a.createElement(It,{component:c,route:e,config:t}),r.a.createElement(qe,null))}})}))):null}}]),t}(r.a.Component);var Jt=Object(h.b)(function(e){return{config:e.config,loading:e.loading}})(Wt);o.a.render(r.a.createElement(h.a,{store:z},r.a.createElement(Jt,null)),document.getElementById("app"))}},[[188,2,1]]]);
//# sourceMappingURL=main.0f304236.chunk.js.map